function RemoteStore(t){return this.create=function(t){return this.ajax("create",t)},this.where=function(t){return this.ajax("where",t)},this.find=function(t){return this.ajax("find",{id:t})},this.update=function(t,e){return e.id=t,this.ajax("update",e)},this.destroy=function(t){var e={id:t};return this.ajax("destroy",e)},this.all=function(){return this.where({})},this.processUrl=function(t,e){var r=Object();return Object.keys(e).forEach(function(n){-1!=t.indexOf(":"+n)?t=t.replace(":"+n,e[n]):r[n]=e[n]}),{url:t,params:r}},this.routes=Object(),this.resourceUrl=t,this.memberUrl=t+"/:id",this.setRoute=function(t,e,r){this.routes[t]={method:e.toUpperCase(),url:r}},this.setAction=function(t,e,r){this.setRoute(t,e,r),"put"==e.toLowerCase()?this[t]=function(e,r){var r=$.extend({},r,e);return this.ajax(t,r)}:this[t]=function(e){return this.ajax(t,e)}},this.setRoute("create","POST",this.resourceUrl),this.setRoute("where","GET",this.resourceUrl),this.setRoute("find","GET",this.memberUrl),this.setRoute("destroy","DELETE",this.memberUrl),this.setRoute("update","PUT",this.memberUrl),this.ajax=function(t,e){var r=this.routes[t],n=this.processUrl(r.url,e),i=$.Deferred(),s=this;return $.ajax({method:r.method,url:n.url,data:n.params}).then(function(e){s.trigger(t+" "+r.method.toLowerCase()),i.resolve(e)}),i},Observable(this),this}Observable=function(t){t=t||{};var e={},r=function(t,e){t.replace(/\S+/g,e)},n=function(e,r){Object.defineProperty(t,e,{value:r,enumerable:!1,writable:!1,configurable:!1})};return n("on",function(n,i){return"function"!=typeof i?t:(r(n,function(t,r){(e[t]=e[t]||[]).push(i),i.typed=r>0}),t)}),n("off",function(n,i){return"*"==n?e={}:r(n,function(t){if(i)for(var r,n=e[t],s=0;r=n&&n[s];++s)r==i&&n.splice(s--,1);else delete e[t]}),t}),n("one",function(e,r){function n(){t.off(e,n),r.apply(t,arguments)}return t.on(e,n)}),n("trigger",function(n){for(var i=arguments.length-1,s=new Array(i),u=0;i>u;u++)s[u]=arguments[u+1];return r(n,function(r){for(var n,i=(e[r]||[]).slice(0),u=0;n=i[u];++u){if(n.busy)return;n.busy=1;try{n.apply(t,n.typed?[r].concat(s):s)}catch(o){t.trigger("error",o)}i[u]!==n&&u--,n.busy=0}e.all&&"all"!=r&&t.trigger.apply(t,["all",r].concat(s))}),t}),t};