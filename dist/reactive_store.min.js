function ReActiveStore(t){this.data=Object(),this.paramKey=function(t,e){return Object.keys(e).sort().map(function(t){return e[t]}),md5(JSON.stringify(e))},this.find=function(t,e){return key=this.paramKey(this.collectionUrl,t),null==this.requestQue[key]?this.request(key,"find",t):this.data[key]&&e(this.data[key]),this.on(key,e),this},this.requestQue=Object(),this.findOne=function(t,e){return key=this.paramKey(this.memberUrl,t),null==this.requestQue[key]?this.request(key,"findOne",t):this.data[key]&&e(this.data[key]),this.on(key,e),this},this.resources=function(t){this.collectionUrl=t,this.memberUrl=t+"/:id"},this.request=function(e,r,i){return t=this,this.requestQue[e]={key:e,type:r,params:i,fetch:function(){t["fetch"+r.replace("find","")](this.key,this.params)}},this.requestQue[e].fetch(),this},this.create=function(t){return t=this.params.create(t),this.ajax("post",this.collectionUrl,t),this},this["delete"]=function(e){return t=this,key=this.paramKey(this.memberUrl,e),this.ajax("delete",this.memberUrl,e,function(){t.trigger(key+" delete")}),this},this.update=function(e,r){return t=this,key=this.paramKey(this.memberUrl,e),r=$.extend({},e,r),this.ajax("put",this.memberUrl,r,function(e){t.trigger(key+" put",e)}),this},this.ajax=function(e,r,i,n){t=this,processedUrl=this.processUrl(r,i),console.log(processedUrl),$[e](processedUrl.url,processedUrl.params).then(function(r){n?n(r):t.trigger(e,r)}).fail(function(t){console.log("Error"),console.log(t)})},this.processUrl=function(t,e){return sendParams=Object(),Object.keys(e).forEach(function(r){-1!=t.indexOf(":"+r)?t=t.replace(":"+r,e[r]):sendParams[r]=e[r]}),{url:t,params:sendParams}},this.fetchOne=function(t,e){that=this,this.ajax("get",this.memberUrl,e,function(e){that.data[t]=e,that.trigger(t,e)})},this.fetch=function(t,e){that=this,this.ajax("get",this.collectionUrl,e,function(e){that.data[t]=e,that.trigger(t,e)})};var e=Observable(this);return e.on("post put update delete",function(){Object.keys(this.requestQue).forEach(function(t){fetcher=e.requestQue[t],"find"==fetcher.type&&fetcher.fetch()})}),e}Observable=function(t){t=t||{};var e={},r=function(t,e){t.replace(/\S+/g,e)},i=function(e,r){Object.defineProperty(t,e,{value:r,enumerable:!1,writable:!1,configurable:!1})};return i("on",function(i,n){return"function"!=typeof n?t:(r(i,function(t,r){(e[t]=e[t]||[]).push(n),n.typed=r>0}),t)}),i("off",function(i,n){return"*"==i?e={}:r(i,function(t){if(n)for(var r,i=e[t],s=0;r=i&&i[s];++s)r==n&&i.splice(s--,1);else delete e[t]}),t}),i("one",function(e,r){function i(){t.off(e,i),r.apply(t,arguments)}return t.on(e,i)}),i("trigger",function(i){for(var n=arguments.length-1,s=new Array(n),a=0;n>a;a++)s[a]=arguments[a+1];return r(i,function(r){for(var i,n=(e[r]||[]).slice(0),a=0;i=n[a];++a){if(i.busy)return;i.busy=1;try{i.apply(t,i.typed?[r].concat(s):s)}catch(u){t.trigger("error",u)}n[a]!==i&&a--,i.busy=0}e.all&&"all"!=r&&t.trigger.apply(t,["all",r].concat(s))}),t}),t};